---
import BaseHead from "../components/BaseHead.astro";
import Footer from "../components/Footer.astro";
import Header from "../components/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../consts";
import { getCollection } from "astro:content";

const menu = await getCollection("menu");
---

<!doctype html>
<html lang="es">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <style>
      .fade-in {
        animation: fadeIn 0.5s ease-in-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      .hidden {
        display: none !important;
      }
    </style>
  </head>
  <body>
    <!-- <section class="bg-[url(/burger.png)] w-full h-[33.33vh] object-cover">
    </section>-->
    <main class="bg-fondo min-h-screen p-8">
      <h1 class="text-3xl font-bold text-titulo justify-center flex mb-8">
        Bienvenido a {SITE_TITLE}!
      </h1>

      <div class="container mx-auto max-w-5xl">
        <!-- Filtros de Categoría -->
        <div class="flex flex-wrap justify-center gap-4 mb-8">
          <button
            class="filter-btn px-6 py-2 bg-yellow-600 text-white font-bold rounded-full shadow-lg hover:bg-blue-700 hover:scale-105 transition-all focus:outline-none ring-2 ring-blue-600 ring-offset-2 ring-offset-gray-900 active"
            data-filter="all"
          >
            Todos
          </button>
          <button
            class="filter-btn px-6 py-2 bg-yellow-600 text-gray-300 font-bold rounded-full shadow-lg hover:bg-gray-700 hover:text-white hover:scale-105 transition-all focus:outline-none"
            data-filter="Hamburguesas"
          >
            Hamburguesas
          </button>
          <button
            class="filter-btn px-6 py-2 bg-yellow-600 text-gray-300 font-bold rounded-full shadow-lg hover:bg-gray-700 hover:text-white hover:scale-105 transition-all focus:outline-none"
            data-filter="Hot Dogs"
          >
            Hot Dogs
          </button>
          <button
            class="filter-btn px-6 py-2 bg-yellow-600 text-gray-300 font-bold rounded-full shadow-lg hover:bg-gray-700 hover:text-white hover:scale-105 transition-all focus:outline-none"
            data-filter="Otros"
          >
            Otros
          </button>
          <button
            class="filter-btn px-6 py-2 bg-yellow-600 text-gray-300 font-bold rounded-full shadow-lg hover:bg-gray-700 hover:text-white hover:scale-105 transition-all focus:outline-none"
            data-filter="Bebidas"
          >
            Bebidas
          </button>
          <button
            class="filter-btn px-6 py-2 bg-yellow-600 text-gray-300 font-bold rounded-full shadow-lg hover:bg-gray-700 hover:text-white hover:scale-105 transition-all focus:outline-none"
            data-filter="Extras"
          >
            Extras
          </button>
        </div>

        <div class="grid gap-4 md:grid-cols-2" id="menu-container">
          {
            menu.map((dishes: (typeof menu)[0]) => {
              const { title, price, description, category } = dishes.data;
              return (
                <article
                  class="menu-item relative bg-black rounded-lg p-4 mb-4 transition-all duration-300 ease-in-out transform hover:-translate-y-1 hover:shadow-xl fade-in"
                  data-category={category}
                >
                  <div class="bg-card border border-border rounded-lg p-6 hover:border-primary/50 transition-colors group h-full flex flex-col justify-between">
                    <div>
                      <div class="flex justify-between items-start mb-2">
                        <h2 class="text-2xl font-bold leading-tight text-green-400">
                          {title}
                        </h2>
                        <span class="inline-block bg-yellow-600 text-white text-xs px-2 py-1 rounded-full uppercase font-semibold tracking-wide">
                          {category}
                        </span>
                      </div>
                      <p class="mb-4 text-gray-300">{description}</p>
                    </div>
                    <div class="mt-auto pt-4 border-t border-gray-700">
                      <span class="text-xl font-bold text-green-400">
                        ${price}
                      </span>
                    </div>
                  </div>
                </article>
              );
            })
          }
        </div>
      </div>
      <Footer />
    </main>

    <script>
      const buttons = document.querySelectorAll(".filter-btn");
      const items = document.querySelectorAll(".menu-item");

      buttons.forEach((button) => {
        button.addEventListener("click", () => {
          // Remover clase activa de todos los botones
          buttons.forEach((btn) => {
            btn.classList.remove(
              "bg-blue-600",
              "text-white",
              "ring-2",
              "ring-blue-600",
              "ring-offset-2",
              "ring-offset-gray-900",
              "active",
            );
            btn.classList.add("bg-gray-800", "text-gray-300");
          });

          // Agregar clase activa al botón presionado
          button.classList.remove("bg-gray-800", "text-gray-300");
          button.classList.add(
            "bg-blue-600",
            "text-white",
            "ring-2",
            "ring-blue-600",
            "ring-offset-2",
            "ring-offset-gray-900",
            "active",
          );

          const filterValue = button.getAttribute("data-filter");

          items.forEach((item) => {
            if (
              filterValue === "all" ||
              item.getAttribute("data-category") === filterValue
            ) {
              item.classList.remove("hidden");
              item.classList.add("fade-in");
            } else {
              item.classList.add("hidden");
              item.classList.remove("fade-in");
            }
          });
        });
      });
    </script>
  </body>
</html>
